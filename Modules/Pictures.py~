def tf_decoder(dims):
    """                                                                                                                                                                                                               Graph that decodes a jpeg image.                                                                                                                                                                              

    1. The graph                                                                                                                                                                                                      2. The tensor which provides the decoded picture in its final form                                                                                                                                                3. The placeholder for the picture name                                                                                                                                                                           """
    g = tf.Graph()
    with g.as_default():
        picture_name_tensor = tf.placeholder(tf.string)
        picture_contents = tf.read_file(picture_name_tensor)
        picture = tf.image.decode_jpeg(picture_contents, dct_method="INTEGER_ACCURATE")
        picture_as_float = tf.image.convert_image_dtype(picture, tf.float32)
        picture_4d = tf.expand_dims(picture_as_float, 0)
        resize_shape = tf.stack([dims[0], dims[1]])
        resize_shape_as_int = tf.cast(resize_shape, dtype=tf.int32)
        final_tensor =  tf.image.resize_bilinear(picture_4d, resize_shape_as_int,
                                                 align_corners=True)*255
    return g, picture_name_tensor, final_tensor
